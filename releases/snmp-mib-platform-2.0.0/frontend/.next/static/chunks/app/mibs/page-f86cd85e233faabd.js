(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5438],{13068:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s(95155),a=s(12115),n=s(53580);function l(e){let t=(0,a.useRef)(e);(0,a.useEffect)(()=>{t.current=e},[e]);let s=(0,a.useCallback)(e=>{let s=document.activeElement,r=s&&("INPUT"===s.tagName||"TEXTAREA"===s.tagName||"true"===s.contentEditable);t.current.forEach(t=>{let{key:s,ctrlKey:a=!1,metaKey:n=!1,shiftKey:l=!1,altKey:i=!1,action:c,preventDefault:o=!0}=t,d=e.key.toLowerCase()===s.toLowerCase(),u=e.ctrlKey===a&&e.metaKey===n&&e.shiftKey===l&&e.altKey===i;if(d&&u){if(r&&!["Escape","F1","F2","F3"].includes(e.key))return;o&&e.preventDefault(),c()}})},[]);(0,a.useEffect)(()=>(document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)),[s])}var i=s(97168),c=s(88145),o=s(53904),d=s(82178),u=s(40646),m=s(85339),h=s(14186),x=s(85690),f=s(53999);function p(e){let{isRefreshing:t,lastRefresh:s,retryCount:n,currentInterval:l,onManualRefresh:p,onPause:g,onResume:j,isPaused:v=!1,className:y}=e,[N,b]=a.useState(0),[w,S]=a.useState(0);return a.useEffect(()=>{if(!s||v)return;let e=setInterval(()=>{let e=Date.now(),t=Math.max(0,s.getTime()+l-e);b(t),S((l-t)/l*100),0===t&&S(0)},1e3);return()=>clearInterval(e)},[s,l,v]),(0,r.jsxs)("div",{className:(0,f.cn)("flex items-center space-x-2 text-sm",y),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[t?(0,r.jsx)(o.A,{className:"h-4 w-4 animate-spin text-blue-500"}):v?(0,r.jsx)(d.A,{className:"h-4 w-4 text-yellow-500"}):(0,r.jsx)(u.A,{className:"h-4 w-4 text-green-500"}),(0,r.jsx)("span",{className:"text-muted-foreground",children:t?"刷新中...":v?"已暂停":"自动刷新"})]}),n>0&&(0,r.jsxs)(c.E,{variant:"destructive",className:"text-xs",children:[(0,r.jsx)(m.A,{className:"h-3 w-3 mr-1"}),"重试 ",n]}),!v&&!t&&N>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(h.A,{className:"h-3 w-3 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:(e=>{let t=Math.ceil(e/1e3);if(t<60)return"".concat(t,"s");let s=Math.floor(t/60);return"".concat(s,"m ").concat(t%60,"s")})(N)}),(0,r.jsx)("div",{className:"w-16 h-1 bg-muted rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-blue-500 transition-all duration-1000 ease-linear",style:{width:"".concat(w,"%")}})})]}),s&&(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["上次: ",(e=>{let t=new Date().getTime()-e.getTime();return t<6e4?"刚刚":t<36e5?"".concat(Math.floor(t/6e4),"分钟前"):t<864e5?"".concat(Math.floor(t/36e5),"小时前"):e.toLocaleString()})(s)]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"sm",onClick:p,disabled:t,className:"h-6 px-2","data-shortcut":"refresh",children:(0,r.jsx)(o.A,{className:(0,f.cn)("h-3 w-3",t&&"animate-spin")})}),(0,r.jsx)(i.$,{variant:"ghost",size:"sm",onClick:v?j:g,className:"h-6 px-2",children:v?(0,r.jsx)(x.A,{className:"h-3 w-3"}):(0,r.jsx)(d.A,{className:"h-3 w-3"})})]})]})}var g=s(88482),j=s(41397),v=s(29869),y=s(27213),N=s(9803),b=s(30227),w=s(39022),S=s(57434),k=s(99890),A=s(5196),R=s(54416);function C(e){let{accept:t=[],maxSize:s=0xa00000,multiple:l=!0,onFilesSelected:i,className:c,disabled:o=!1,children:d}=e,u=a.useRef(null),{isDragging:m,getDragProps:h}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{accept:t=[],maxSize:s=0xa00000,multiple:r=!0,onDrop:l,onDragEnter:i,onDragLeave:c,onError:o}=e,[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(0),x=(0,a.useRef)(null),f=(0,a.useCallback)(e=>{let r=[];for(let a of e){if(t.length>0&&!t.some(e=>e.startsWith(".")?a.name.toLowerCase().endsWith(e.toLowerCase()):a.type.match(e.replace("*",".*")))){null==o||o("文件 ".concat(a.name," 类型不支持"));continue}if(a.size>s){null==o||o("文件 ".concat(a.name," 超过大小限制 (").concat(Math.round(s/1024/1024),"MB)"));continue}r.push(a)}return r},[t,s,o]),p=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),h(e=>e+1),(null===(t=e.dataTransfer)||void 0===t?void 0:t.items)&&e.dataTransfer.items.length>0&&(u(!0),null==i||i())},[i]),g=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h(e=>{let t=e-1;return 0===t&&(u(!1),null==c||c()),t})},[c]),j=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),v=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),u(!1),h(0);let s=Array.from((null===(t=e.dataTransfer)||void 0===t?void 0:t.files)||[]);if(0===s.length)return;if(!r&&s.length>1){null==o||o("只能上传一个文件");return}let a=f(s);a.length>0&&(null==l||l(a),(0,n.oR)({title:"文件上传",description:"成功接收 ".concat(a.length," 个文件")}))},[r,f,l,o]);return{isDragging:d,getDragProps:()=>({ref:x,onDragEnter:p,onDragLeave:g,onDragOver:j,onDrop:v}),dropRef:x}}({accept:t,maxSize:s,multiple:l,onDrop:i,onError:e=>console.error("拖拽错误:",e)});return(0,r.jsxs)("div",{className:(0,f.cn)("relative",c),children:[(0,r.jsx)(g.Zp,{...h(),className:(0,f.cn)("border-2 border-dashed transition-all duration-200 cursor-pointer",m&&"border-blue-500 bg-blue-50 dark:bg-blue-950/20",o&&"opacity-50 cursor-not-allowed",!o&&"hover:border-blue-400 hover:bg-blue-50/50 dark:hover:bg-blue-950/10"),onClick:()=>{if(!o){var e;null===(e=u.current)||void 0===e||e.click()}},children:(0,r.jsx)(g.Wu,{className:"flex flex-col items-center justify-center p-8 text-center",children:d||(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,f.cn)("mb-4 p-4 rounded-full transition-colors",m?"bg-blue-100 dark:bg-blue-900":"bg-muted"),children:(0,r.jsx)(v.A,{className:(0,f.cn)("h-8 w-8 transition-colors",m?"text-blue-600":"text-muted-foreground")})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:m?"释放文件到这里":"拖拽文件到这里"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:["或者 ",(0,r.jsx)("span",{className:"text-blue-600 underline",children:"点击选择文件"})]}),(0,r.jsxs)("div",{className:"space-y-1 text-xs text-muted-foreground",children:[(0,r.jsxs)("p",{children:["支持格式: ",0===t.length?"所有文件":t.map(e=>e.replace("*","")).join(", ")]}),(0,r.jsxs)("p",{children:["最大大小: ",(()=>{let e=s/1048576;return e>=1?"".concat(e,"MB"):"".concat(s/1024,"KB")})()]}),l&&(0,r.jsx)("p",{children:"支持多文件上传"})]})]})})}),(0,r.jsx)("input",{ref:u,type:"file",accept:t.join(","),multiple:l,onChange:e=>{let t=Array.from(e.target.files||[]);t.length>0&&i(t),e.target.value=""},className:"hidden",disabled:o})]})}function I(e){let{files:t,onRemove:s,showProgress:a=!1,uploadProgress:n={},className:l}=e,o=e=>{let t=e.type.toLowerCase();return t.startsWith("image/")?(0,r.jsx)(y.A,{className:"h-4 w-4"}):t.startsWith("video/")?(0,r.jsx)(N.A,{className:"h-4 w-4"}):t.startsWith("audio/")?(0,r.jsx)(b.A,{className:"h-4 w-4"}):t.includes("zip")||t.includes("rar")||t.includes("tar")?(0,r.jsx)(w.A,{className:"h-4 w-4"}):t.includes("text")||t.includes("json")||t.includes("xml")?(0,r.jsx)(S.A,{className:"h-4 w-4"}):(0,r.jsx)(k.A,{className:"h-4 w-4"})},d=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},u=e=>{let t=n[e];return void 0===t?"pending":100===t?"completed":-1===t?"error":"uploading"};return 0===t.length?null:(0,r.jsxs)("div",{className:(0,f.cn)("space-y-2",l),children:[(0,r.jsxs)("h4",{className:"text-sm font-medium",children:["选中的文件 (",t.length,")"]}),(0,r.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.map((e,t)=>{let l=u(e.name),h=n[e.name]||0;return(0,r.jsx)(g.Zp,{className:"p-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 text-muted-foreground",children:o(e)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"text-sm font-medium truncate",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:d(e.size)}),"completed"===l&&(0,r.jsxs)(c.E,{variant:"default",className:"text-xs",children:[(0,r.jsx)(A.A,{className:"h-3 w-3 mr-1"}),"完成"]}),"error"===l&&(0,r.jsxs)(c.E,{variant:"destructive",className:"text-xs",children:[(0,r.jsx)(m.A,{className:"h-3 w-3 mr-1"}),"失败"]}),s&&(0,r.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>s(t),className:"h-6 w-6 p-0",children:(0,r.jsx)(R.A,{className:"h-3 w-3"})})]})]}),a&&"uploading"===l&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)(j.k,{value:h,className:"h-1"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["上传中... ",h,"%"]})]})]})]})},"".concat(e.name,"-").concat(t))})})]})}var T=s(89852),E=s(82714),M=s(88524),D=s(99840),B=s(47924),O=s(92657),L=s(91788),q=s(62525),F=s(56671),P=s(95261);function _(){var e,t;let[s,d]=function(e,t){let[s,r]=(0,a.useState)(()=>{try{let t=localStorage.getItem(e);return t?JSON.parse(t):""}catch(e){}return""});return(0,a.useEffect)(()=>{try{localStorage.setItem(e,JSON.stringify(s))}catch(e){}},[e,s]),[s,r]}("mibs-search",""),[u,m]=(0,a.useState)([]),[h,x]=(0,a.useState)(!1),[f,j]=(0,a.useState)(null),[y,N]=(0,a.useState)(""),[b,w]=(0,a.useState)(!1),[k,A]=(0,a.useState)(0);l([{key:"s",ctrlKey:!0,action:()=>{let e=document.querySelector('[data-shortcut="save"]');e&&!e.disabled&&(e.click(),(0,n.oR)({title:"快捷键",description:"已触发保存操作 (Ctrl+S)"}))},description:"保存当前内容"},{key:"f",ctrlKey:!0,action:()=>{let e=document.querySelector('input[placeholder*="搜索"], input[placeholder*="search"]');e&&(e.focus(),e.select(),(0,n.oR)({title:"快捷键",description:"已聚焦搜索框 (Ctrl+F)"}))},description:"聚焦搜索框"},{key:"Escape",action:()=>{let e=document.querySelector('[data-shortcut="close"], [aria-label="Close"]');e&&e.click();let t=document.activeElement;t&&t.blur()},description:"关闭对话框或取消选择",preventDefault:!1},{key:"n",ctrlKey:!0,action:()=>{let e=document.querySelector('[data-shortcut="new"]');e&&!e.disabled&&(e.click(),(0,n.oR)({title:"快捷键",description:"已触发新建操作 (Ctrl+N)"}))},description:"创建新项目"},{key:"r",ctrlKey:!0,action:()=>{let e=document.querySelector('[data-shortcut="refresh"]');e&&!e.disabled&&(e.click(),(0,n.oR)({title:"快捷键",description:"已刷新数据 (Ctrl+R)"}))},description:"刷新数据"},{key:"d",ctrlKey:!0,action:()=>{let e=document.querySelector('[data-shortcut="delete"]');e&&!e.disabled&&(e.click(),(0,n.oR)({title:"快捷键",description:"已触发删除操作 (Ctrl+D)"}))},description:"删除选中项"},{key:"a",ctrlKey:!0,action:()=>{let e=document.querySelector('[data-shortcut="select-all"]');e&&!e.disabled&&(e.click(),(0,n.oR)({title:"快捷键",description:"已全选 (Ctrl+A)"}))},description:"全选项目"},{key:"/",action:()=>{(function(){let e=[{key:"Ctrl + S",description:"保存当前内容"},{key:"Ctrl + F",description:"聚焦搜索框"},{key:"Ctrl + N",description:"创建新项目"},{key:"Ctrl + R",description:"刷新数据"},{key:"Ctrl + D",description:"删除选中项"},{key:"Ctrl + A",description:"全选项目"},{key:"Esc",description:"关闭对话框或取消选择"},{key:"/",description:"显示此帮助"}];e.map(e=>"".concat(e.key,": ").concat(e.description)).join("\n"),(0,n.oR)({title:"键盘快捷键",description:(0,r.jsx)("div",{className:"space-y-1 text-sm",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("code",{className:"bg-muted px-1 rounded text-xs",children:e.key}),(0,r.jsx)("span",{className:"ml-2",children:e.description})]},t))})})})()},description:"显示快捷键帮助"}]),t="mibs",l((0,a.useCallback)(()=>{switch(t){case"devices":return[{key:"e",ctrlKey:!0,action:()=>{let e=document.querySelector('[data-shortcut="edit"]');e&&!e.disabled&&e.click()},description:"编辑选中设备"}];case"mibs":return[{key:"u",ctrlKey:!0,action:()=>{let e=document.querySelector('[data-shortcut="upload"]');e&&!e.disabled&&e.click()},description:"上传MIB文件"}];case"alert-rules":return[{key:"t",ctrlKey:!0,action:()=>{let e=document.querySelector('[data-shortcut="test"]');e&&!e.disabled&&e.click()},description:"测试告警规则"}];default:return[]}},[t])());let[R,_]=(0,a.useState)([]),[z,J]=(0,a.useState)(!0),[U,K]=(0,a.useState)(0),[H,$]=(0,a.useState)(1),W=async()=>{try{J(!0);let e=await P.u.getMIBs({page:H,limit:10,search:s});_(e.mibs||[]),K(e.total||0)}catch(e){F.oR.error("Failed to load MIBs"),_([])}finally{J(!1)}},{isRefreshing:Z,lastRefresh:X,retryCount:V,currentInterval:G,manualRefresh:Y,pause:Q,resume:ee}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{interval:s=3e4,enabled:r=!0,onError:l,maxRetries:i=3,backoffMultiplier:c=2}=t,[o,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[h,x]=(0,a.useState)(0),[f,p]=(0,a.useState)(s),g=(0,a.useRef)(e),j=(0,a.useRef)(),v=(0,a.useRef)(!0);(0,a.useEffect)(()=>{g.current=e},[e]),(0,a.useEffect)(()=>{let e=()=>{v.current=!document.hidden,v.current&&r&&y()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[r]);let y=(0,a.useCallback)(async()=>{if(!o){d(!0);try{await g.current(),m(new Date),x(0),p(s)}catch(t){let e=h+1;if(x(e),e<=i){let t=s*Math.pow(c,e);p(t),(0,n.oR)({title:"刷新失败",description:"第".concat(e,"次重试，").concat(Math.round(t/1e3),"秒后再次尝试"),variant:"destructive"})}else(0,n.oR)({title:"刷新失败",description:"已达到最大重试次数，请手动刷新",variant:"destructive"});l&&l(t)}finally{d(!1)}}},[o,h,i,s,c,l]);(0,a.useEffect)(()=>{if(!r){j.current&&clearInterval(j.current);return}return j.current&&clearInterval(j.current),j.current=setInterval(()=>{v.current&&y()},f),()=>{j.current&&clearInterval(j.current)}},[r,f,y]);let N=(0,a.useCallback)(()=>{y()},[y]),b=(0,a.useCallback)(()=>{j.current&&clearInterval(j.current)},[]),w=(0,a.useCallback)(()=>{r&&!j.current&&(j.current=setInterval(()=>{v.current&&y()},f))},[r,f,y]);return{isRefreshing:o,lastRefresh:u,retryCount:h,currentInterval:f,manualRefresh:N,pause:b,resume:w}}(W,{interval:6e4,enabled:!0});(0,a.useEffect)(()=>{W()},[H,s]);let et=async e=>{for(let t of e)try{await P.u.uploadMIB(t),F.oR.success("MIB file ".concat(t.name," uploaded successfully"))}catch(e){F.oR.error("Failed to upload ".concat(t.name))}W()},es=async e=>{try{await P.u.deleteMIB(e),F.oR.success("MIB deleted successfully"),W()}catch(e){F.oR.error("Failed to delete MIB")}},er=async e=>{try{let t=await P.u.getMIB(e.id);j(t),x(!0)}catch(e){F.oR.error("Failed to load MIB details")}},ea=R.filter(e=>{var t,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase()))||(null===(r=e.filename)||void 0===r?void 0:r.toLowerCase().includes(s.toLowerCase()))});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(p,{isRefreshing:Z,lastRefresh:X,retryCount:V,currentInterval:G,onManualRefresh:Y,onPause:Q,onResume:ee}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"MIB Management"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Upload, manage and browse SNMP MIB files"})]}),(0,r.jsxs)(g.Zp,{children:[(0,r.jsxs)(g.aR,{children:[(0,r.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"h-5 w-5"}),"Upload MIB Files"]}),(0,r.jsx)(g.BT,{children:"Drag and drop MIB files here or click to browse"})]}),(0,r.jsxs)(g.Wu,{children:[(0,r.jsx)(C,{onFilesSelected:et,acceptedTypes:[".mib",".txt",".asn1"],maxFiles:10,maxSize:0xa00000}),u.length>0&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(I,{files:u,onRemove:e=>{m(t=>t.filter((t,s)=>s!==e))}})})]})]}),(0,r.jsxs)(g.Zp,{children:[(0,r.jsx)(g.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(g.ZB,{children:"MIB Files"}),(0,r.jsxs)(g.BT,{children:["Total: ",U," MIB files"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(B.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(T.p,{placeholder:"Search MIB files...",value:s,onChange:e=>d(e.target.value),className:"pl-8 w-64"})]}),(0,r.jsxs)(i.$,{variant:"outline",onClick:Y,disabled:Z,children:[(0,r.jsx)(o.A,{className:"h-4 w-4 mr-2 ".concat(Z?"animate-spin":"")}),"Refresh"]})]})]})}),(0,r.jsx)(g.Wu,{children:(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(M.XI,{children:[(0,r.jsx)(M.A0,{children:(0,r.jsxs)(M.Hj,{children:[(0,r.jsx)(M.nd,{children:"Name"}),(0,r.jsx)(M.nd,{children:"Filename"}),(0,r.jsx)(M.nd,{children:"Size"}),(0,r.jsx)(M.nd,{children:"Upload Date"}),(0,r.jsx)(M.nd,{children:"OIDs"}),(0,r.jsx)(M.nd,{children:"Status"}),(0,r.jsx)(M.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(M.BF,{children:z?(0,r.jsx)(M.Hj,{children:(0,r.jsx)(M.nA,{colSpan:7,className:"text-center py-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 animate-spin mr-2"}),"Loading MIB files..."]})})}):0===ea.length?(0,r.jsx)(M.Hj,{children:(0,r.jsx)(M.nA,{colSpan:7,className:"text-center py-8",children:"No MIB files found"})}):ea.map(e=>(0,r.jsxs)(M.Hj,{children:[(0,r.jsx)(M.nA,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"font-medium",children:e.name})]})}),(0,r.jsx)(M.nA,{className:"font-mono text-sm",children:e.filename}),(0,r.jsx)(M.nA,{children:e.size}),(0,r.jsx)(M.nA,{children:e.uploadDate}),(0,r.jsx)(M.nA,{children:e.oids}),(0,r.jsx)(M.nA,{children:(0,r.jsx)(c.E,{variant:"active"===e.status?"default":"secondary",children:e.status})}),(0,r.jsx)(M.nA,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>er(e),children:(0,r.jsx)(O.A,{className:"h-4 w-4"})}),(0,r.jsx)(i.$,{variant:"ghost",size:"sm",children:(0,r.jsx)(L.A,{className:"h-4 w-4"})}),(0,r.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>es(e.id),children:(0,r.jsx)(q.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})})]}),(0,r.jsx)(D.lG,{open:h,onOpenChange:x,children:(0,r.jsxs)(D.Cf,{className:"max-w-4xl max-h-[80vh]",children:[(0,r.jsxs)(D.c7,{children:[(0,r.jsxs)(D.L3,{children:["MIB Details: ",null==f?void 0:f.name]}),(0,r.jsx)(D.rr,{children:"View MIB file information and OID structure"})]}),(0,r.jsx)("div",{className:"grid gap-4 py-4 overflow-y-auto",children:f&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(E.J,{children:"Filename"}),(0,r.jsx)("p",{className:"text-sm font-mono",children:f.filename})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(E.J,{children:"Size"}),(0,r.jsx)("p",{className:"text-sm",children:f.size})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(E.J,{children:"Upload Date"}),(0,r.jsx)("p",{className:"text-sm",children:f.uploadDate})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(E.J,{children:"Total OIDs"}),(0,r.jsx)("p",{className:"text-sm",children:f.oids})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(E.J,{children:"Description"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:f.description||"No description available"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(E.J,{children:"OID Structure"}),(0,r.jsx)("div",{className:"border rounded-md p-4 max-h-64 overflow-y-auto",children:(0,r.jsxs)(M.XI,{children:[(0,r.jsx)(M.A0,{children:(0,r.jsxs)(M.Hj,{children:[(0,r.jsx)(M.nd,{children:"OID"}),(0,r.jsx)(M.nd,{children:"Name"}),(0,r.jsx)(M.nd,{children:"Type"}),(0,r.jsx)(M.nd,{children:"Access"})]})}),(0,r.jsx)(M.BF,{children:(null===(e=f.oidList)||void 0===e?void 0:e.map((e,t)=>(0,r.jsxs)(M.Hj,{children:[(0,r.jsx)(M.nA,{className:"font-mono text-sm",children:e.oid}),(0,r.jsx)(M.nA,{children:e.name}),(0,r.jsx)(M.nA,{children:(0,r.jsx)(c.E,{variant:"outline",children:e.type})}),(0,r.jsx)(M.nA,{children:e.access})]},t)))||(0,r.jsx)(M.Hj,{children:(0,r.jsx)(M.nA,{colSpan:4,className:"text-center",children:"No OID information available"})})})]})})]})]})}),(0,r.jsxs)(D.Es,{children:[(0,r.jsx)(i.$,{variant:"outline",onClick:()=>x(!1),children:"Close"}),(0,r.jsx)(i.$,{children:"Export OIDs"})]})]})})]})}},41397:(e,t,s)=>{"use strict";s.d(t,{k:()=>i});var r=s(95155),a=s(12115),n=s(55863),l=s(53999);let i=a.forwardRef((e,t)=>{let{className:s,value:a,...i}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...i,children:(0,r.jsx)(n.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});i.displayName=n.bL.displayName},53580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m,oR:()=>u});var r=s(12115);let a=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=i(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(o);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},53999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(52596),a=s(39688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},75515:(e,t,s)=>{Promise.resolve().then(s.bind(s,13068))},82714:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var r=s(95155),a=s(12115),n=s(40968),l=s(74466),i=s(53999);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,i.cn)(c(),s),...a})});o.displayName=n.b.displayName},88145:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var r=s(95155);s(12115);var a=s(74466),n=s(53999);let l=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...a})}},88482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>l,aR:()=>i});var r=s(95155),a=s(12115),n=s(53999);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},88524:(e,t,s)=>{"use strict";s.d(t,{A0:()=>i,BF:()=>c,Hj:()=>o,XI:()=>l,nA:()=>u,nd:()=>d});var r=s(95155),a=s(12115),n=s(53999);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...a})})});l.displayName="Table";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...a})});i.displayName="TableHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...a})});c.displayName="TableBody",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});o.displayName="TableRow";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});d.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption"},89852:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var r=s(95155),a=s(12115),n=s(53999);let l=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},95261:(e,t,s)=>{"use strict";s.d(t,{u:()=>n});let r=s(49509).env.NEXT_PUBLIC_API_URL||"http://localhost:17880/api/v1";class a{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(r).concat(e),a=await fetch(s,{headers:{"Content-Type":"application/json",...t.headers},...t});if(!a.ok)throw Error("API请求失败: ".concat(a.status," ").concat(a.statusText));return a.json()}async getDevices(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search),(null==e?void 0:e.type)&&t.set("type",e.type),(null==e?void 0:e.status)&&t.set("status",e.status),this.request("/devices?".concat(t))}async getDevice(e){return this.request("/devices/".concat(e))}async createDevice(e){return this.request("/devices",{method:"POST",body:JSON.stringify(e)})}async updateDevice(e,t){return this.request("/devices/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteDevice(e){return this.request("/devices/".concat(e),{method:"DELETE"})}async getMIBs(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search),this.request("/mibs?".concat(t))}async getMIB(e){return this.request("/mibs/".concat(e))}async uploadMIB(e){let t=new FormData;t.append("file",e);let s=await fetch("".concat(r,"/mibs/upload"),{method:"POST",body:t});if(!s.ok)throw Error("MIB上传失败: ".concat(s.status," ").concat(s.statusText));return s.json()}async deleteMIB(e){return this.request("/mibs/".concat(e),{method:"DELETE"})}async getAlertRules(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search),(null==e?void 0:e.groupId)&&t.set("groupId",e.groupId),(null==e?void 0:e.status)&&t.set("status",e.status),this.request("/alert-rules?".concat(t))}async getAlertRule(e){return this.request("/alert-rules/".concat(e))}async createAlertRule(e){return this.request("/alert-rules",{method:"POST",body:JSON.stringify(e)})}async updateAlertRule(e,t){return this.request("/alert-rules/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteAlertRule(e){return this.request("/alert-rules/".concat(e),{method:"DELETE"})}async getMonitoringComponents(){return this.request("/monitoring/components")}async installMonitoringComponent(e,t){return this.request("/monitoring/install",{method:"POST",body:JSON.stringify({componentId:e,config:t})})}async getMonitoringStatus(){return this.request("/monitoring/status")}async performSNMPWalk(e,t,s){return this.request("/snmp/walk",{method:"POST",body:JSON.stringify({target:e,oid:t,community:s})})}async performSNMPGet(e,t,s){return this.request("/snmp/get",{method:"POST",body:JSON.stringify({target:e,oid:t,community:s})})}async getHealthStatus(){return this.request("/health")}}let n=new a},97168:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var r=s(95155),a=s(12115),n=s(99708),l=s(74466),i=s(53999);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:o=!1,...d}=e,u=o?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(c({variant:a,size:l,className:s})),ref:t,...d})});o.displayName="Button"},99840:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,Es:()=>x,L3:()=>f,c7:()=>h,lG:()=>c,rr:()=>p,zM:()=>o});var r=s(95155),a=s(12115),n=s(15452),l=s(54416),i=s(53999);let c=n.bL,o=n.l9,d=n.ZL;n.bm;let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});u.displayName=n.hJ.displayName;let m=a.forwardRef((e,t)=>{let{className:s,children:a,...c}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...c,children:[a,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let h=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};h.displayName="DialogHeader";let x=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="DialogFooter";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...a})});f.displayName=n.hE.displayName;let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});p.displayName=n.VY.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[8096,7358],()=>t(75515)),_N_E=e.O()}]);